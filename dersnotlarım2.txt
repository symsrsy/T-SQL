T-SQL PROGRAMLAMA

Deðiþken tanýmlama ve deðer atama

DECLARE @NUMBER1 AS INTEGER
SET @NUMBER1=5
SELECT @NUMBER1

Gerçek bir veri tabanýndan deðiþkene veri atama

DECLARE @ID ASS INT
SELECT @ID=ID FROM TEST.dbo.USERS WHERE ID=1

Deðiþkendeki deðeri veri tabanýmda aradým

DECLARE @ID ASS INT
DECLARE @NAMESURNAME AS VARCHAR(100)
SET @ID=1
SELECT @NAMESURNAME=NAMESURNAME
FROM TEST.dbo.USERS WHERE ID=@ID
SELECT @ID

Rastgele deðer üretme---->
RAND()*2---->0 ile 2 arasýnda deðer üretir.

SQL’de otomatik iþlemler için

SQL Server Agent->jobs->new jobs->steps(sorguyu bu kýsýmda çaðýrýyorum.)->schedule(burda ne kadar sürede çalýþacaðýný ekleyeceðim.)


Database’de en üstten 1 deðer getirme

SELECT TOP 1 * FROM SENSORVALUES ORDEY BY DATE_ DESC

611 E KADAR RANDOM SAYI ÜRET ÝNTEGER A ÇEVÝR.

SELECT	* FROM CUSTOMERS
DECLARE @ID AS INT

SET @ID=CONVERT(INT,RAND()*611)


IF BLOKLARININ KULLANIMI

DECLARE @GENDER AS VARCHAR(1)='E'
DECLARE @GENDEREXP AS VARCHAR(10)
IF @GENDER='E'
SET @GENDEREXP='Erkek'
IF @GENDER='K'
SET @GENDEREXP='Kadýn'
SELECT @GENDEREXP












IF ÖRNEKLERÝ

DECLARE @BIRTHDATE AS DATE='1986-07-15'
DECLARE @AGE AS INT
SET @AGE=DATETIFF(YEAR,@BIRTHDATE,GETDATE())
DECLARE @AGEGROUP AS VARCHAR(50)

IF @AGE BETWEEN 20 AND 29
SET @AGEGROUP='20-29 ARASI'
IF @AGE BETWEEN 30 AND 29
SET @AGEGROUP='20-29 ARASI'

ÝÇ ÝÇE IF ÖRNEKLERÝ

IF @AGE BETWEEN 20 AND 29
BEGIN
    IF @GENDER='E'
	   SET @AGEGROUP='20-29 ARASI,ERKEK'
	IF @GENDER='K'
	   SET @AGEGOUP='20-29 ARASI,KADIN'
END

CASE BLOÐU ÖRNEÐÝ

!! Select sorgusuna eklenen case i group by ile çaðýrmayý unutma

SELECT
CASE
    WHEN DATEPART(HOUR,DATE_)<10 THEN 'ÖÐLEDEN ÖNCE'
	WHEN DATEPART(HOUR,DATE_) BETWEEN 12 AND 17 THEN 'ÖÐLEDEN SONRA'
	WHEN DATEPART(HOUR,DATE_)>17 THEN 'AKÞAM'
END AS TIMPERIOD,
SUM(TOTALPRICE) AS TOTALPRICE
FROM SALES.dbo.SALES
GROUP BY
CASE
    WHEN DATEPART(HOUR,DATE_)<10 THEN 'ÖÐLEDEN ÖNCE'
	WHEN DATEPART(HOUR,DATE_) BETWEEN 12 AND 17 THEN 'ÖÐLEDEN SONRA'

END


IFF BLOÐU KULLANANIMI

!! IFF Sorgusunun içindeki sorguyu group by ile çaðýrmayý unutma

SELECT 
IFF(CUSTOMERGENDER='E','Erkek','Kadýn') AS GENDEREXP,
SUM(TOTALPRICE) AS TOTALPRICE
FROM SALES.dbo.SALES
GROUP BY CUSTOMERGENDER
